{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://raw.githubusercontent.com/zarr-conventions/multiscales/refs/tags/v0.1.0/schema.json",
  "title": "Multiscales Convention",
  "description": "Schema for multiscale pyramid information in Zarr. Properties define the hierarchical layout and transformations.",
  "type": "object",
  "properties": {
    "layout": {
      "type": "array",
      "description": "Array of objects representing the pyramid layout and transformation relationships",
      "items": {
        "type": "object",
        "properties": {
          "group": {
            "type": "string",
            "description": "Group name for this resolution level"
          },
          "from_group": {
            "type": "string",
            "description": "Source group used to generate this level"
          },
          "transform": {
            "type": "object",
            "description": "Transformation parameters describing the coordinate transformation for this level. Can contain scale/translation, proj:transform/proj:shape, or other convention-specific transformation parameters.",
            "properties": {
              "scale": {
                "type": "array",
                "description": "Array of scale factors per axis describing the resolution change from the derived group",
                "items": {
                  "type": "number"
                }
              },
              "translation": {
                "type": "array",
                "description": "Array of translation offsets per axis in the coordinate space",
                "items": {
                  "type": "number"
                }
              }
            },
            "additionalProperties": true
          },
          "resampling_method": {
            "type": "string",
            "description": "Resampling method for this specific level"
          }
        },
        "required": ["group"],
        "if": {
          "required": ["from_group"]
        },
        "then": {
          "required": ["transform"]
        },
        "additionalProperties": true
      },
      "minItems": 1
    },
    "resampling_method": {
      "type": "string",
      "description": "Default resampling method used for downsampling"
    }
  },
  "required": ["layout"],
  "additionalProperties": true
}
