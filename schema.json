{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://raw.githubusercontent.com/zarr-conventions/multiscales/refs/tags/v0.1.0/schema.json",
  "title": "Multiscales Convention",
  "description": "Schema for multiscale pyramid information in Zarr. Properties define the hierarchical layout and transformations.",
  "type": "object",
  "properties": {
    "version": {
      "type": "string",
      "description": "Multiscales metadata version",
      "pattern": "^0\\.1\\.0$"
    },
    "layout": {
      "type": "array",
      "description": "Array of objects representing the pyramid layout and transformation relationships",
      "items": {
        "type": "object",
        "properties": {
          "group": {
            "type": "string",
            "description": "Group name for this resolution level"
          },
          "from_group": {
            "type": "string",
            "description": "Source group used to generate this level"
          },
          "factors": {
            "type": "array",
            "description": "Array of decimation factors per axis (e.g., `[2, 2]` for 2x decimation)",
            "items": {
              "type": "number"
            }
          },
          "scale": {
            "type": "array",
            "description": "Array of scale factors per axis describing the resolution change from the derived group",
            "items": {
              "type": "number"
            }
          },
          "translation": {
            "type": "array",
            "description": "Array of translation offsets per axis in the coordinate space",
            "items": {
              "type": "number"
            }
          },
          "resampling_method": {
            "type": "string",
            "description": "Resampling method for this specific level"
          }
        },
        "required": ["group", "scale"],
        "if": {
          "required": ["from_group"]
        },
        "then": {
          "required": ["scale"]
        },
        "additionalProperties": true
      },
      "minItems": 1
    },
    "resampling_method": {
      "type": "string",
      "description": "Default resampling method used for downsampling"
    }
  },
  "required": ["version", "layout"],
  "additionalProperties": true
}
