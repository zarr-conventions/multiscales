{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://raw.githubusercontent.com/zarr-conventions/multiscales/refs/tags/v0.1.0/schema.json",
  "title": "Multiscales Convention",
  "description": "Schema for multiscale pyramid information in Zarr. Properties define the hierarchical layout and transformations.",
  "type": "object",
  "properties": {
    "layout": {
      "type": "array",
      "description": "Array of objects representing the pyramid layout and transformation relationships",
      "items": {
        "type": "object",
        "properties": {
          "asset": {
            "type": "string",
            "description": "Path to the Zarr group or array for this resolution level. Can be a simple name (e.g., '0') for a child group, or a path with '/' separator for nested groups or arrays (e.g., '0/data' for an array within a group)",
            "pattern": "^(?!/)(?!.*(\\.\\.))([^/]+(/[^/]+)*)$"
          },
          "derived_from": {
            "type": "string",
            "description": "Path to the source Zarr group or array used to generate this level. Uses the same path syntax as 'asset' with '/' separator for nested resources",
            "pattern": "^(?!/)(?!.*(\\.\\.))([^/]+(/[^/]+)*)$"
          },
          "transform": {
            "type": "object",
            "description": "Transformation parameters describing the coordinate transformation for this level. Contains relative transformation parameters (scale, translation, factors). Absolute positioning parameters should be placed at the layout entry level, outside this object.",
            "properties": {
              "scale": {
                "type": "array",
                "description": "Array of scale factors per axis describing the resolution change from the derived group",
                "items": {
                  "type": "number"
                }
              },
              "translation": {
                "type": "array",
                "description": "Array of translation offsets per axis in the coordinate space",
                "items": {
                  "type": "number"
                }
              }
            },
            "additionalProperties": true
          },
          "resampling_method": {
            "type": "string",
            "description": "Resampling method for this specific level"
          }
        },
        "required": ["asset", "scale"],
        "if": {
          "required": ["derived_from"]
        },
        "then": {
          "required": ["transform"]
        },
        "additionalProperties": true
      },
      "minItems": 1
    },
    "resampling_method": {
      "type": "string",
      "description": "Default resampling method used for downsampling"
    }
  },
  "required": ["layout"],
  "additionalProperties": true
}
